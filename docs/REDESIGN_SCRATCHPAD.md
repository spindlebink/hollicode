# Language redesign scratchpad

Hollicode's experimental right now, so a lot of the decisions that've been made may be altered in later versions. Right now, even things like syntax and bytecode specification are in flux. In this document I'd like to address some possible alterations.

## Syntax

The syntax as-is works fine, but, having now written a non-trivial, intentionally spaghetti'd script in it, I've determined some possible improvements and/or observations. Some of these are minor and could be addressed with lexing alterations. Some of them aren't so much, and, if addressed, might need a re-think of interpreter flow.

### Brackets may get annoying, and they feel a little restrictive.

There's a sense of boundedness to putting `if` statements in brackets and indenting code past that.

```
[if this]
	Stuff for the if.
```

The block attached to the if statement feels loosely coupled to the if statement rather than tightly. Pythonic languages don't have this problem because a colon is a cognitively more "open" symbol than a bracket--it signals to our brains, "HITHER IS SOMETHING ATTACHED: something attached." Meanwhile, brackets enclose stuff. Open. Shut. There's a bracket.

I designed the syntax like this because the brackets represented for me isolating programmery parts of the script from non-programmery parts (like a prettier/less noisy version of what Yarn does in surrounding everything in angle brackets). They just feel less enjoyable to use in longer productions.

#### Possible alterations

We do need something to indicate that a line isn't a text line. I like the idea of a single character ala the other special line types (anchor, goto command). An expression beginning with a single character would proceed to the end of the line. We'd probably use an `@` or `$`. I'm not sure yet.

```
@if this
	Stuff for the if
```

We may also shuffle around the characters used as line prefixes as well. Right now we've got:
```
# Comment. May switch to `--` ala Lua, although people are theoretically more likely to begin text lines with `--` than another character. Tilde? C-style `//`?
-> Goto command. This one feels right at home, honestly. No alterations necessary.
> Anchor--currently leaning toward using octothorpe instead
```

## Bytecode

The current bytecode works really well. I like the design choice of separating syntax from generated bytecode, especially given the in-between status of Hollicode's bytecode instruction set i.e. lower-level than straight-up scripting but much higher than "real" VM instructions.

### Cut off extraneous ops

We may be able to remove `RET` in favor of `JMP` at the end of options. Need more thought put into this--doing so may sacrifice the flexibility of options, since right now they're guaranteed to return to the last `wait` directive, wherever it was, and we'd need to analyze and figure out where the associated `wait` statement would be for a `JMP` at compile time.


